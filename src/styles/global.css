@import "tailwindcss";
@config "../../tailwind.config.ts";

/* Dark mode variant using data-mode attribute */
@variant dark (&:where([data-mode="dark"], [data-mode="dark"] *));

/* Color palette based on Atom One Dark color scheme <3 */
@theme {
	--color-bg-base: oklch(98.5% 0 0);
	--color-text-primary: oklch(27% 0.01 235);
	--color-link: oklch(0.7188 0.1405 285.08);
	--color-link-hover: oklch(0.65 0.1405 285.08);
	--color-brand: oklch(0.7188 0.1405 285.08);
	--color-brand-emphasis: oklch(20% 0 0);
	--color-text-muted: oklch(55% 0.12 280);
	--color-accent-secondary: #e06c75;
}

@layer base {
	html {
		color-scheme: light dark;
		accent-color: var(--color-brand);
		scrollbar-gutter: stable;

		&[data-mode="light"] {
			color-scheme: light;
		}

		&[data-mode="dark"] {
			color-scheme: dark;
			--color-bg-base: #282c34;
			--color-text-primary: #abb2bf;
			--color-link: oklch(0.7188 0.1405 285.08);
			--color-link-hover: oklch(0.65 0.1405 285.08);
			--color-brand: oklch(0.7188 0.1405 285.08);
			--color-brand-emphasis: oklch(95% 0 0);
			--color-text-muted: oklch(75% 0.08 285);
			--color-accent-secondary: #e06c75;
		}
	}

	:target {
		scroll-margin-block: 5ex;
	}

	@view-transition {
		navigation: auto;
	}

	/* Force link colors in prose content only */
	.prose a:not(.nav-link):not(.not-prose a) {
		color: var(--color-link) !important;
		text-decoration: underline !important;
		text-decoration-color: var(--color-link) !important;
		text-underline-offset: 2px !important;
		transition: color 0.2s ease, text-decoration-color 0.2s ease !important;
	}

	.prose a:not(.nav-link):not(.not-prose a):hover {
		color: var(--color-link-hover) !important;
		text-decoration-color: var(--color-link-hover) !important;
	}
}

@layer components {
	.page-title {
		@apply text-brand-emphasis text-2xl font-semibold;
	}

	.nav-link {
		color: var(--color-brand);
		text-decoration: none;
		position: relative;
		padding-bottom: 2px;
	}

	.nav-underline {
		position: absolute;
		bottom: 0;
		left: 0;
		height: 1px;
		background-color: var(--color-brand);
		transition: left 0.3s ease, width 0.3s ease;
		pointer-events: none;
	}
}

@utility prose {
	--tw-prose-body: var(--color-text-primary);
	--tw-prose-bold: var(--color-text-primary);
	--tw-prose-bullets: var(--color-text-primary);
	--tw-prose-code: var(--color-text-primary);
	--tw-prose-headings: var(--color-brand-emphasis);
	--tw-prose-hr: 0.5px dashed #666;
	--tw-prose-links: var(--color-link);
	--tw-prose-quotes: var(--color-text-muted);
	--tw-prose-th-borders: #666;
}
